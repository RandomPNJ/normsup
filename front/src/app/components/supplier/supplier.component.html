<div class="container main-cont">
  <div class="cont-wrapper">
    <div>
      <span class="title">Mes Fournisseurs</span>
    </div>
    <div class="sub-cont">
      <span class="table-header">Vous avez {{itemsDisplay.length | i18nPlural: itemPluralMapping['supplier']}}.</span>
      <div style="position: relative;">
        <span (click)="openModal(template)" class="glyphicon glyphicon-plus-sign plus-icn" role="button"></span>
      </div>
      <hr />
      <div class="table-cont">
        <app-supplier-table #supplierTableComp [itemsToDisplay]="itemsDisplay"></app-supplier-table>
      </div>
    </div>
    <ng-template class="test" #template>
      <div class="modal-header">
        <h4 class="modal-title pull-left" *ngIf="searchState">Ajouter un fournisseur</h4>
        <h4 class="modal-title pull-left" *ngIf="company">Information sur l'entreprise </h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <div class="row search-company" *ngIf="searchState" [ngClass]="{'fade-in': searchState, 'fade-away': !searchState}">
            <!-- <span class="title-add-sup">Information sur l'entreprise recherchée</span> -->
            <div class="input-field col s12">
              <input [(ngModel)]="searchCompanyID" (keydown.enter)="searchCompany(searchCompanyID)" #companyInput id="company-input" type="text" data-length="10" appFocus>
              <label for="company-input">Société</label>
              <span class="helper-text">Sirene ou Siret</span>
            </div>
            <button (click)="searchCompany(searchCompanyID)" [disabled]="!searchCompanyID" class="btn waves-effect waves-light submit-btn" type="submit" name="action">Rechercher
              <i class="material-icons right">send</i>
            </button>
          </div>
          <div class="row" *ngIf="company" [ngClass]="{'fade-in': !searchState, 'fade-away': searchState}">
            <!-- <span class="title-add-sup">Séléctionnez l'entreprise recherchée : </span> -->
            <!-- <span class="title-add-sup">Information sur l'entreprise recherchée : </span> -->
            <form action="#" class="">
                <!-- <p *ngFor="let company of companies; index as i">
                  <label for="company-{{i}}">
                    <input class="with-gap" name="radio-group" id="company-{{i}}" type="radio"
                    (change)="onCompanySelection(company)" [ngModel]="selectedCompany" [value]="company" />
                    <span class="select-company">{{company.fields?.denominationunitelegale ? company.fields?.denominationunitelegale : 'Pas de dénomination légale'}} - Siret: {{company.fields?.siret}}</span>
                  </label>
                </p> -->
                <div>
                  <div class="row">
                    <div class="input-field  col s6">
                      <input id="denom-legale" type="text" class="form-control" [(ngModel)]="company.fields.denominationunitelegale" [value]="company.fields?.denominationunitelegale ? company.fields.denominationunitelegale : ''" placeholder="Dénomination légale">
                      <label class="active" for="denom-legale">Dénomination légale</label>
                      <!-- <span class="helper-text" data-error="wrong" data-success="right">Veuillez entrer une dénomitation</span> -->
                    </div>
                    <div class="input-field  col s6">
                      <input id="siret" type="text" class="form-control" [(ngModel)]="company.fields.siret" [value]="company.fields?.siret" placeholder="Siret">
                      <label class="active" for="siret">Siret</label>
                    </div>
                  </div>
                </div>
              <div class="select-comp-but">
                <button (click)="addCompany(comp)" [disabled]="company.fields?.denominationunitelegale === '' || !company.fields?.siret === ''" class="btn waves-effect waves-light submit-btn" type="submit" name="action">Ajouter
                  <i class="material-icons right">send</i>
                </button>
                <button (click)="searchState = true; companies.length = 0;" class="btn waves-effect waves-light submit-btn" type="submit" name="action">Retour
                  <i class="material-icons right">send</i>
                </button>
              </div>
            </form>
          </div>
      </div>
    </ng-template>
  </div>
</div>