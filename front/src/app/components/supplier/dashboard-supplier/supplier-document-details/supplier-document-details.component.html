<div class="client-details-cont container component-padding" *ngIf="documentType">
  <app-ui-back-link
    [link]="'../'"
    [label]="'Retour aux documents'">
  </app-ui-back-link>

  <div class="row nopadding col-lg-11 col-md-12 col-sm-7 col-8" style="padding-top: 45px !important; padding-bottom: 25px !important;">
    <div class="col-lg-7 col-md-12 col-sm-10 col-8 title nopadding">
      <app-ui-page-title [title]="documentType"></app-ui-page-title>
      <span class="item-count" *ngIf="clients">
        <span class="count-style">
          {{ clients.length }}
        </span>
        clients utilisant ce document
      </span>
    </div>
    <div class="col-lg-5 nopadding">
      <div class="row nopadding">
        <div class="col-6" style="padding-right: 0px !important;">
          <button style="height: 30px;margin-left: 0px !important;" type="button" class="btn new-btn-normsup comp-btn">
            <span class="button-txt" style="padding-right: 17px !important;padding-left: 17px !important;">Déposer</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row nopadding col-lg-11 col-md-12 col-sm-7 col-8 mb-5">

    <div class="container nopadding">

      <!-- Liste des clients -->
      <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-6">
        <app-ui-card-template
          [headerTitle]="'Liste des clients'"
          [templateBody]="clientListTemplate">
        </app-ui-card-template>
      </div>


      <!-- Paramètre des relances -->
      <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-6">
        <app-ui-card-template
          [headerTitle]="'Gestion du document'"
          [templateBody]="documentDetailTemplate">
        </app-ui-card-template>
      </div>
    </div>
  </div>


</div>


<ng-template #clientListTemplate>
  <div
    (click)="onClientRowClick(client)"
    *ngFor="let client of clients"
    class="client-row">
    <span class="row-line client-txt text-capitalize">
      {{ client.name }}
    </span>
  </div>
</ng-template>

<ng-template #documentDetailTemplate>

  <div class="row-line client-txt font-weight-bold" *ngIf="!selectedClient; else elseBlock">
    Aucun client sélectionné.
  </div>

  <ng-template #elseBlock>

    <div class="client-card-row">
      <div class="row-line">
        <div class="basic-txt">
          Statut du document
        </div>

        <div class="status-document" [ngClass]="{
          'status-document-valid' : selectedClient.isValid,
          'status-document-invalid' : !selectedClient.isValid
        }">
          {{ selectedClient.isValid ? 'À jour' : 'À mettre à jour' }}
        </div>
      </div>
    </div>

    <div class="client-card-row">
      <div class="row-line client-txt" style="margin-bottom: 25px;">
        <div class="basic-txt">
          Informations
        </div>
      </div>

      <div class="row-line information-line">
        <span class="left-column-information">Date d'expiration</span>
        <span class="right-column-information">
          {{ selectedClient.expirationDate ? (selectedClient.expirationDate | date: 'dd/MM/yyyy') : 'N/A' }}
        </span>
      </div>

      <div class="row-line information-line">
        <span class="left-column-information">Date du dernier upload</span>
        <span class="right-column-information">
          {{ selectedClient.uploadDate ? (selectedClient.uploadDate | date: 'dd/MM/yyyy') : 'N/A' }}
        </span>
      </div>

      <div class="row-line information-line">
        <span class="left-column-information">Utilisateur</span>
        <span class="right-column-information">{{ selectedClient.user | userNamePipe : 'uppercase' : 'nameCut' }}</span>
      </div>

      <div class="row-line information-line">
        <span class="left-column-information">Durée de validité</span>
        <span class="right-column-information">{{ selectedClient.durationValidity ? selectedClient.durationValidity + ' mois' : 'N/A'}}</span>
      </div>
    </div>

    <div class="client-card-row">
      <div class="row-line client-txt font-weight-bold">
          Déposer un nouveau document
      </div>
    </div>

    <div class="row-line-centered save-document-btn">
      <app-ui-custom-button
        [label]="'Enregistrer'">
      </app-ui-custom-button>
    </div>

  </ng-template>

</ng-template>
